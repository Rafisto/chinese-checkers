package game

type ClassicBoard struct {
	board [][]int
	pawns *ClassicPawns
}

func NewClassicBoard(playerNum int) (*ClassicBoard, error) {
	classicPawns, err := NewClassicPawns(playerNum)

	if err != nil {
		return nil, err
	}

	board := [][]int{
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, 1, -1, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, 1, -1, 1, -1, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{6, -1, 6, -1, 6, -1, 6, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 3, -1, 3, -1, 3, -1, 3},
		{-1, 6, -1, 6, -1, 6, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 3, -1, 3, -1, 3, -1},
		{-1, -1, 6, -1, 6, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 3, -1, 3, -1, -1},
		{-1, -1, -1, 6, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 3, -1, -1, -1},
		{-1, -1, -1, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, -1, -1, -1}, // center
		{-1, -1, -1, 4, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 5, -1, -1, -1},
		{-1, -1, 4, -1, 4, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 5, -1, 5, -1, -1},
		{-1, 4, -1, 4, -1, 4, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 5, -1, 5, -1, 5, -1},
		{4, -1, 4, -1, 4, -1, 4, -1, 0, -1, 0, -1, 0, -1, 0, -1, 0, -1, 5, -1, 5, -1, 5, -1, 5},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, 2, -1, 2, -1, 2, -1, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 2, -1, 2, -1, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 2, -1, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
		{-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
	}

	if playerNum == 2 {
		board[4][8] = 1
		board[4][10] = 1
		board[4][12] = 1
		board[4][14] = 1
		board[4][16] = 1
		board[12][8] = 2
		board[12][10] = 2
		board[12][12] = 2
		board[12][14] = 2
		board[12][16] = 2
	}

	classicBoard := &ClassicBoard{
		board: board,
		pawns: classicPawns,
	}
	return classicBoard, nil
}

func (b *ClassicBoard) Check(x, y int) int {
	if x < 0 || y < 0 || x > 24 || y > 16 {
		return -1
	}
	return b.board[y][x]
}

func (b *ClassicBoard) PrintBoard() {
	for i := 0; i < 17; i++ {
		for j := 0; j < 25; j++ {
			if b.board[i][j] == -1 {
				print("- ")
			} else {
				print(b.board[i][j])
				print(" ")
			}
		}
		print("\n")
	}
}

func (b *ClassicBoard) GetBoard() [][]int {
	return b.board
}

func (b *ClassicBoard) GetPawns() Pawns {
	return b.pawns
}
